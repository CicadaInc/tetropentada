{% extends "base.html" %}

{% block nav %}
<li><a href="/main">Главная</a></li>
<li class="active"><a href="/index/0">Вопрос - ответ</a></li>
{% if session.get('username') %}
    <li><a href="/profile/{{ session['user_id'] }}">{{ session['username'] }}</a></li>
    <li><a href="/sign_out">Выход</a></li>
{% else %}
    <li><a href="/registration">Регистрация</a></li>
    <li><a href="/sign_in">Вход</a></li>
{% endif %}
{% endblock %}

{% block site_wrapper %}
<div class="container">
    <div class="author-links">
        <a href="/profile/{{ author.id }}">
            <img class="round-img" src="{{ url_for('static', filename='avatars/{}'.format(author.avatar)) }}"
                 height="30" width="30">
            {{ author.username }}
        </a>
        <span class="badge badge-primary">{{ question.tag }}</span>
    </div>
    <h1>{{ question.title }}</h1>
    <h4>{{ question.content }}</h4><br>

    <div class="answers">
        {% for answer in answers %}
            <div class="answer">
                <h4>
                    <a class="user-link" href="/profile/{{ User.query.filter_by(id=answer.user_id).first().id }}">
                        <img class="round-img" src="{{ url_for('static', filename='avatars/{}'.format(User.query.filter_by(id=answer.user_id).first().avatar)) }}"
                            height="30" width="30">
                        {{ User.query.filter_by(id=answer.user_id).first().username }}
                    </a>
                    {% if author.username == session['username'] %}
                        {{ form.best(type="button", class_="btn btn-outline-success btn-xs") }}
                        {{ form.bad(type="button", class_="btn btn-outline-danger btn-xs") }}
                    {% endif %}
                </h4>
                <div class="answer-content">{{ answer.content }}</div>
            </div>
        {% endfor %}
    </div><br>

    <form class="form-signin" role="form" method="post">
        {{ form.hidden_tag() }}
        <div>
            {{ form.content(class_="form-control", placeholder="Ваш ответ") }}
            {{ form.submit(class_="btn btn-lg btn-success btn-block") }}
        </div>
    </form>
</div>
{% endblock %}